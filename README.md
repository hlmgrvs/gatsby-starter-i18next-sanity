<h1 align="center">
  Gatsby I18next Sanity.io Starter
</h1>

A gatsby starter for search-engine friendly, multilanguage websites with i18next and sanity.io

##to-do

- [x] add product schema to sanity
- [x] add post-css styling
- [x] add lerna to manage both packages
- [x] make lang attribute in html header change on lang switch
- [ ] add schema for reach text content and rich text parsing rules in client folder

## Features

- I18next for snippet translation
- Code-split translation resources by language and namespace
- Sanity.io to create dynamic, translated pages
- Localized URLs (SEO friendly)
- Context-sensitive language switching (keeps current page)
- Alternate-links and language-attributes
- sitemap.xml with language information
- Localized 404 pages


## ðŸš€ Quick start

1.  **Install**

    Install dependencies
    
    ```sh
    npm install
    ```
2.  **Initiate Sanity and deploy Sanity graphql schema.**

    Navigate into your studio directory and initiate sanity project

    ```sh
    npm start
    ```


2.  **Start developing.**

    Navigate into your project directory and start it up.

    ```sh
    sanity init
    ```
    After initiating:
    
    ```sh
    sanity graphql deploy
    ```
    

3.  **Open the source code and start editing!**

    Your site is now running at `http://localhost:8000`!
    Sanity studio is now running at `http://localhost:3333`!

    _Note: You'll also see a second link: _`http://localhost:8000/___graphql`_. This is a tool you can use to experiment with querying your data. Learn more about using this tool in the [Gatsby tutorial](https://www.gatsbyjs.org/tutorial/part-five/#introducing-graphiql)._

    Open the `web directory in your code editor of choice and edit `src/templates/Home.js`. Save your changes and the browser will update in real time!

## How does it work?

All page urls are translated, so there are no pages like in other Gatsby projects. All pages are dynamically generated (see `gatsby-node.js`) from the `templates` folder.
For every page, the language is set in the `pageContext` along with the translation resources, so they get bundled in the page data. For every template, the translation namespaces are defined.

The schema generated by sanity.io is extended to provide a translate functions, which allows us to only bundle the translations for one language.

You can find further information in this blog post: https://dev.to/jospohr/proper-i18n-with-gatsby-i18next-and-sanity-io-5g8a

